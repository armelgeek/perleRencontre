{% extends 'base.html.twig' %}

{% block title %}Profile{% endblock %}
{% block stylesheets %}
<style type="text/css">
    .couverture{
        width: 100%;
        height: 300px;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        position: relative;

    }
   
    .couverture-operation{
        display: flex;
        flex-direction: row;
        position: absolute;
        bottom: 10px;
        right: 15px;
    }
    .btn-operation{
        margin-left:20px; 
    }
</style>
<link rel="manifest" href="{{ asset('css/jquery.Jcrop.min.css') }}">
{% endblock %}
{% block content %}
    {{ form_start(form) }}
        {{ form_widget(form) }}
        <input type="submit" value="Enregister">
    {{ form_end(form) }}
{% endblock %}
{% block javascripts%}
<script type="text/javascript" src="{{asset('js/jquery.min.js')}}"></script>
<script type="text/javascript">
(function ($) {
    $.fn.serializeFormJSON = function() { 
        let o = {};
        let a = this.serializeArray();        
        $.each(a, function () {
            let name = this.name;
            let value = this.value || '';            
            if (o[name]) {
                if (!Array.isArray(o[name])) {
                    o[name] = [o[name]];
                }
                o[name].push(value);
            } else {
                o[name] = value;
            }
        });        return o;
    };
})(jQuery);

$('form').submit(function(e) {
    e.preventDefault();

    let form = $(this);
    let url  = form.attr('action');

    let data = form.serializeFormJSON();
    $.ajax({
        type: 'POST',
        url: url,
        data: data,
        success: function(data) {
           console.log(data);
        },
    });
});
</script>
{% endblock %}